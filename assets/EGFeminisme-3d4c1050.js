import"./main-dff46d0e.js";import{b as s}from"./init-7741dda9.js";console.info("Script started successfully");WA.onInit().then(async()=>{WA.player.state.tutorialDone=!0,WA.controls.restorePlayerProximityMeeting();const a=new URL(WA.room.mapURL);WA.room.onEnterLayer("to-hall").subscribe(()=>{WA.ui.actionBar.removeButton("Tableau"),WA.ui.actionBar.removeButton("Briefing")});for(let e=1;e<6;e++)console.log(`Saving variable Enigme${e}`),WA.player.state.saveVariable(`Enigme${e}`,0,{public:!0,persist:!0,ttl:60*35,scope:"room"}),console.log(`Saved variable Enigme${e} as`,WA.player.state.loadVariable(`Enigme${e}`));WA.players.onVariableChange("Enigme1").subscribe(e=>{WA.player.state.Enigme1=e.value}),WA.players.onVariableChange("Enigme2").subscribe(e=>{WA.player.state.Enigme2=e.value}),WA.players.onVariableChange("Enigme3").subscribe(e=>{WA.player.state.Enigme3=e.value}),WA.players.onVariableChange("Enigme4").subscribe(e=>{WA.player.state.Enigme4=e.value}),WA.players.onVariableChange("Enigme5").subscribe(e=>{WA.player.state.Enigme5=e.value});function o(e){WA.room.area.onEnter(e).subscribe(()=>{WA.ui.modal.openModal({title:e,src:`${a.protocol}//${a.host}${a.protocol==="https:"?"/uni-rennes/":"/"}EGFeminisme/${e}.html`,allowApi:!0,allow:"microphone; camera",position:"center"},()=>{WA.ui.modal.closeModal()})}),WA.room.area.onLeave(e).subscribe(()=>{WA.ui.modal.closeModal()})}const l=["E1","E2","E3","E4","E4B","E5","E6"];for(let e of l)o(e);let t={url:"https://www.youtube.com/embed/aFZ4mV52XFE?si=9vaLPfWDeUxbN3Xf&autoplay=1;&amp;controls=0&amp;",visible:!1,allowApi:!1,allowPolicy:"autoplay",position:{vertical:"top",horizontal:"left"},size:{height:"30vh",width:"30vw"},margin:{left:"5vw",top:"30vh"}},r={url:`${a.protocol}//${a.host}${a.protocol==="https:"?"/uni-rennes/":"/"}EGFeminisme/Tableau_de_bord.html`,visible:!1,allowApi:!0,allowPolicy:"",position:{vertical:"middle",horizontal:"middle"},size:{height:"75vh",width:"75vw"},margin:{right:"15vw",top:"0vh"}},i=await WA.ui.website.open(r);WA.ui.actionBar.addButton({id:"Tableau",type:"button",label:"Tableau de bord",callback:async()=>{i.visible=!i.visible}}),WA.ui.actionBar.addButton({id:"Briefing",type:"button",label:"Briefing Escape game",callback:async()=>{t.visible=!0;let e=await WA.ui.website.open(t);WA.ui.actionBar.removeButton("Briefing"),console.log("Starting briefing"),WA.controls.disablePlayerControls(),setTimeout(()=>{e.url="https://www.youtube.com/embed/aFZ4mV52XFE?si=9vaLPfWDeUxbN3Xf&autoplay=1;&amp;controls=0&amp;&amp;start=82",e.size.height="15vh",e.size.width="15vw",e.margin.left="0vw",e.margin.top="0vh",WA.controls.restorePlayerControls()},82e3),setTimeout(()=>{e.visible=!1},22*60*1e3+3e3)}}),s().then(()=>{console.info("Scripting API Extra ready"),WA.controls.disablePlayerProximityMeeting()}).catch(e=>console.error(e))});
