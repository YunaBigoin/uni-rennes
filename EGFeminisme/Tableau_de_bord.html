<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://play.workadventu.re/iframe_api.js"></script>
    <script src="https://mondevirtuel.univ-rennes2.fr/iframe_api.js"></script>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <title>Tableau de bord</title>
</head>
<body>
    <div style="position: absolute; display: flex; width: 100%; height: 100%; background-color: #333;">
    <div id="liste">
        <div class="relic" id=Relic1>
            Relique 
            <img id="1" style="position: absolute;; max-width: 70px; max-height: 70px" src="notFounded.png">
            <span style="padding-left: 70px;">: XXX</span>
        </div>
        <div class="relic" id=Relic2>
            Relique 
            <img id="2" style="position: absolute;; max-width: 70px; max-height: 70px" src="notFounded.png">
            <span style="padding-left: 70px;">: XXX</span>
        </div>
        <div class="relic" id=Relic3>
            Relique 
            <img id="3" style="position: absolute;; max-width: 70px; max-height: 70px" src="notFounded.png">
            <span style="padding-left: 70px;">: XXX</span>
        </div>
        <div class="relic" id=Relic4>
            Relique 
            <img id="4" style="position: absolute; max-width: 70px; max-height: 70px" src="notFounded.png">
            <span style="padding-left: 70px;">: XXXXX</span>
        </div>
        <div class="relic" id=Relic5>
            Relique 
            <img id="5" style="position: absolute;; max-width: 70px; max-height: 70px" src="notFounded.png">
            <span style="padding-left: 70px;">: XXX</span>
        </div>
    </div>
    <div id="inventory" style="position: relative">Vous avez trouvé X reliques sur 5</div>
    </div>
</body>
</html>
<script>
let codes = ["192", "749", "493", "437", "femme", "vous"]
let images = ["./amazone.png", "./venus.png", "./cintre.png", "./leapetiteprincesse.png", "./mirroir.png"]

async function update() { // Mise à jour de la liste de relique obtenue
    let k = 0;
    for (let i = 1; i < 6; i++) {
        k += WA.player.state.loadVariable(`Enigme${i}`) == 1;
        if (WA.player.state.loadVariable(`Enigme${i}`) == 1) {
            document.getElementById(`Relic${i}`).querySelector("span").textContent = `: ${codes[i - 1]}`;
            document.getElementById(`${i}`).src = images[i - 1];
        }
    }
    console.log(`Going with ${k} relics`);
    inventory.textContent = `Vous avez trouvé ${k} reliques sur 5`;
    if (k === 5) {
        inventory.textContent = `Bravo! Vous avez trouvé les 5 reliques`;
        await goToSecondRoom();
    }
}
setInterval(update, 3);
</script>
